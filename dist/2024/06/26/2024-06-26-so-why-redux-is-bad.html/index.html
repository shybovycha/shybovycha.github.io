<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.0.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://shybovycha.github.io/2024/06/26/2024-06-26-so-why-redux-is-bad.html/"><!-- Primary Meta Tags --><title>So why Redux is bad?</title><meta name="title" content="So why Redux is bad?"><meta name="description"><link rel="stylesheet" href="/_astro/index.BvFNhZYw.css">
<style>footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body data-astro-cid-bvzihdzo> <nav class="top"> <div class="links"> <a class="nav-link nav-item" href="/">Home</a> <a class="nav-link nav-item" href="/about.html">About</a> </div> </nav> <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2024-06-26T11:15:24.000Z"> Jun 26, 2024 </time>  </div> <h1 data-astro-cid-bvzihdzo>So why Redux is bad?</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>Redux is generally considered a bad choice for state management on front-end.
But check out an average application’ React application (or a few fragments of it):</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { Provider, useAtom } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'jotai'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { useQuery } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'react-query'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useInfo</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">error</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">isLoading</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useQuery</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    queryKey: [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'info'</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ],</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    queryFn</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> fetch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/info'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">).</span><span style="color:#6F42C1;--shiki-dark:#B392F0">then</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">r</span><span style="color:#D73A49;--shiki-dark:#F97583"> =></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> r.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">json</span><span style="color:#24292E;--shiki-dark:#E1E4E8">()),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    staleTime: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Infinity</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    info: data,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    isLoading,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    error,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> HomeWithoutProvider</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF">raiseToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> [ </span><span style="color:#005CC5;--shiki-dark:#79B8FF">initialRender</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">setInitialRender</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useState</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> [ </span><span style="color:#005CC5;--shiki-dark:#79B8FF">pageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">setPageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useAtom</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(pageTypeAtom);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  const</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#005CC5;--shiki-dark:#79B8FF">info</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> useInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  useEffect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (info.isNewVersionAvailable) {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">      raiseToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }, [info]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#22863A;--shiki-dark:#85E89D">div</span><span style="color:#24292E;--shiki-dark:#E1E4E8">>...&#x3C;/</span><span style="color:#22863A;--shiki-dark:#85E89D">div</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Home</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Provider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">HomeWithoutProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Provider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Routes</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">BrowserRouter</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Suspense</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> fallback</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">{&#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Loader</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> />}></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Route</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> element</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">{&#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Home</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> />} </span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"/"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Suspense</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">BrowserRouter</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> root</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> React.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">createRoot</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(document.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'root'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">root.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">StrictMode</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">StyleThemeProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">ToastProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">GlobalErrorHandler</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">ReactQueryProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Routes</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">ReactQueryProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">GlobalErrorHandler</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">ToastProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">StyleThemeProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">StrictMode</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<p>Usually most of the components (<code>Home</code>, <code>Routes</code>) and hooks (<code>useInfo</code>) are in separate files,
but for the sake of simplicity I combined them all into one code block.</p>
<p>What I find suboptimal with this code is that it has at least three obvious different state management systems:</p>
<ul>
<li><code>jotai</code> for shared atoms (pieces of global state)</li>
<li><code>React.useState</code> for internal component state</li>
<li>various <code>React.Context</code>s (<code>StyleThemeProvider</code>, <code>ToastProvider</code>, <code>GlobalErrorHandler</code>, etc.)</li>
</ul>
<p>On top of those, there are less obvious state management systems:</p>
<ul>
<li><code>react-router</code> uses internal router state, which could be treated as global application state</li>
<li><code>react-query</code> uses its internal cache for each query</li>
<li><code>react-hook-form</code> uses the form state of a component’ ancestor (which could be declared on any level above the current component)</li>
</ul>
<p>In the pursuit of encapsulation and reducing the boilerplate, front-end developers came up with all of these solutions aiming to solve the problem of managing application state.</p>
<p>So what exactly is this problem? And what are the issues all of the aforementioned solutions try to address?</p>
<p>As I see it, there are two competing camps:</p>
<ul>
<li>containing the logic in small reusable chunks (hooks, components)</li>
<li>sharing chunks of state between different parts of the application</li>
</ul>
<p>There are some side-tracks like dealing with asynchronous actions (like fetching the data from server),
changing the state of external components (like showing a toast message), reducing the unnecessary re-renders.</p>
<p>Back in the day, Redux seemingly addressed these areas to a degree. Redux implements Flux architecture, which was
compared to MVC (Model-View-Controller) architecture back in the day:</p>
<img src="/images/why-redux-is-bad/mvc-architecture.webp" loading="lazy" alt="Data flow in MVC architecture">
<img src="/images/why-redux-is-bad/flux-architecture.webp" loading="lazy" alt="Data flow in Flux architecture">
<p>It became especially popular after Angular.JS’ MVVM (Model-View-ViewModel) architecture implementation was considered slow with its
dirty checks and constant re-rendering.</p>
<p>It could be said that Redux is being shipped in recent versions of React itself - with the use of <a href="https://react.dev/reference/react/useReducer"><code>useReducer()</code></a> hook. One would rarely use Redux on its own, often sticking to a somewhat opinionated stack of reselect (for derived state), react-redux (to <code>connect()</code> components to the store) and redux-thunk or redux-sagas (for asynchronous <code>dispatch()</code> calls).</p>
<p>The aforementioned component could be implemented with the “conventional” (old) Redux approach like so:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { createStore, combineReducers, applyMiddleware } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'redux'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { connect } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'react-redux'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { createSelector } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'reselect'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { thunk } </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'redux-thunk'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> infoReducer</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">state</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { isNewVersionAvailable: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">false</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }, </span><span style="color:#E36209;--shiki-dark:#FFAB70">action</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  switch</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (action.type) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    case</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'INFO_LOADED'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#D73A49;--shiki-dark:#F97583">...</span><span style="color:#24292E;--shiki-dark:#E1E4E8">state, </span><span style="color:#D73A49;--shiki-dark:#F97583">...</span><span style="color:#24292E;--shiki-dark:#E1E4E8">action.payload };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    default</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> state;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> pageDataReducer</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">state</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { pageType: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">undefined</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }, </span><span style="color:#E36209;--shiki-dark:#FFAB70">action</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  switch</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (action.type) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    case</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'SET_PAGE_TYPE'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#D73A49;--shiki-dark:#F97583">...</span><span style="color:#24292E;--shiki-dark:#E1E4E8">state, pageType: action.pageType };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    default</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> state;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> toastReducer</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">state</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { isOpen: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, content: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">undefined</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }, </span><span style="color:#E36209;--shiki-dark:#FFAB70">action</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  switch</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (action.type) {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    case</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> 'SHOW_TOAST'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="color:#D73A49;--shiki-dark:#F97583">...</span><span style="color:#24292E;--shiki-dark:#E1E4E8">state, isOpen: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">true</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, content: action.payload };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    default</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> state;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> rootReducer</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> combineReducers</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  info: infoReducer,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  pageData: pageDataReducer,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  toast: toastReducer,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> store</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> createStore</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(rootReducer, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">applyMiddleware</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(thunk));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// Meet thunks.</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// A thunk in this context is a function that can be dispatched to perform async</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// activity and can dispatch actions and read state.</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// This is an action creator that returns a thunk:</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> loadInfoAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  (</span><span style="color:#E36209;--shiki-dark:#FFAB70">dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    fetch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/info'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">then</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">r</span><span style="color:#D73A49;--shiki-dark:#F97583"> =></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> r.json)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">then</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">payload</span><span style="color:#D73A49;--shiki-dark:#F97583"> =></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({ type: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'INFO_LOADED'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, payload }));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> raiseToastAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">content</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  (</span><span style="color:#E36209;--shiki-dark:#FFAB70">dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({ type: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'SHOW_TOAST'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, payload: content });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> setPageTypeAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">pageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  (</span><span style="color:#E36209;--shiki-dark:#FFAB70">dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({ type: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'SET_PAGE_TYPE'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, pageType });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Home</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ({ </span><span style="color:#E36209;--shiki-dark:#FFAB70">info</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">pageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">loadInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">raiseToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">setPageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  useEffect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    loadInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  useEffect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (info.isNewVersionAvailable) {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">      raiseToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }, [info]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#22863A;--shiki-dark:#85E89D">div</span><span style="color:#24292E;--shiki-dark:#E1E4E8">>...&#x3C;/</span><span style="color:#22863A;--shiki-dark:#85E89D">div</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> mapStateToProps</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ({ </span><span style="color:#E36209;--shiki-dark:#FFAB70">info</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">pageData</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: { </span><span style="color:#E36209;--shiki-dark:#FFAB70">pageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> } }) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ({ info, pageType });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> mapDispatchToProps</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#E36209;--shiki-dark:#FFAB70">dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ({</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  raiseToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">content</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">raiseToastAction</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(content)),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  setPageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">pageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">setPageTypeAction</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(content)),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  loadInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> dispatch</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">loadInfoAction</span><span style="color:#24292E;--shiki-dark:#E1E4E8">()),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HomeContainer</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> connect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(mapStateToProps, mapDispatchToProps)(Home);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Routes</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">BrowserRouter</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Suspense</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> fallback</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">{&#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Loader</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> />}></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Route</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> element</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">{&#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">HomeContainer</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> />} </span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"/"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Suspense</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="color:#005CC5;--shiki-dark:#79B8FF">BrowserRouter</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> root</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> React.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">createRoot</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(document.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'root'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">root.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">render</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Routes</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<p>In my opinion, Redux is not suitable for complex projects for a few reasons:</p>
<ul>
<li>it combines all states (both local and global) in one big messy furball; managing it is quite a hurdle
<ul>
<li>as the project complexity grows, one can not just change a piece of state or selectors without affecting the entirety of the project (and teams)</li>
<li>combining reducers into one supermassive function makes any state update unreasonably long and complex process (remember: each reducer returns a new state instance; now imagine having even a hundred of reducers, each of which returns a new state)</li>
</ul>
</li>
<li>it is easy for a component to be re-rendered on any change to the state; a lot of effort goes into making sure selectors are well memoized and not re-calculated</li>
<li>asynchronous actions are a big unsolved mystery (are you going to use thunks, flux, sagas or something else?)</li>
</ul>
<p>On a flip side, the idea itself could actually bring a lot of positives if cooked properly:</p>
<ul>
<li>there is only one possible flow of data: via <code>dispatch()</code> call, through the reducers and back to the components connected to the store via component props
<ul>
<li>this is supposed to make following the data (e.g. debugging the application) easy</li>
</ul>
</li>
<li>components are pretty much stateless at this point, encapsulated and not having side effects leaking everywhere</li>
<li>logic is nicely separated from the representation and is encapsulated in the reducers (and maybe, to a small extent, in selectors)</li>
</ul>
<p><a href="https://elm-lang.org/">Elm</a> utilizes the language features and its own runtime combined with Redux-like architecture to improve some aspects of the more traditional pure JS way of things, where there are only opinionated libraries and no one way of doing things.</p>
<p>Consider Elm architecture and how it compares to Redux:</p>
<ul>
<li>all the states are still combined into one big cauldron of chaos</li>
<li>by default, any component is just a function returning an array; the entire application will be rerendered on each state change, which is still suboptimal, since literally all components are connected to the store</li>
<li>asynchronous actions are handled separately by the runtime in a similar way to synchronous actions; each action returns a new state and a command (triggering the asynchronous processing)
<ul>
<li>since commands are handled by the runtime and there’s a handful of commands, all of them will (eventually) circle back to dispatching messages just like components do, following the same one-way data flow</li>
</ul>
</li>
<li>reducers are a lot faster, since they are essentially a big <code>switch..case</code> statement (which is cheap)</li>
</ul>
<p>The above component could be re-implemented in Elm as follows:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="elm"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Browser</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583"> exposing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (..)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Attributes</span><span style="color:#D73A49;--shiki-dark:#F97583"> exposing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">style</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Events</span><span style="color:#D73A49;--shiki-dark:#F97583"> exposing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (..)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Http</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Json</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Decode</span><span style="color:#D73A49;--shiki-dark:#F97583"> exposing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Decoder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">map</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">field</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">bool</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">main</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">  Browser</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">element</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    { </span><span style="color:#6F42C1;--shiki-dark:#B392F0">init</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> init</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">update</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> update</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">subscriptions</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> subscriptions</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">view</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> view</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type alias Model</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  { </span><span style="color:#6F42C1;--shiki-dark:#B392F0">info</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Maybe</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Result</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Http</span><span style="color:#D73A49;--shiki-dark:#F97583">.Error</span><span style="color:#D73A49;--shiki-dark:#F97583"> Info</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">toast</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Maybe</span><span style="color:#D73A49;--shiki-dark:#F97583"> Toast</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">pageType</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> PageType</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type alias Info</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  { </span><span style="color:#6F42C1;--shiki-dark:#B392F0">quote</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">source</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">author</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">year</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Int</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type alias Toast</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  { </span><span style="color:#6F42C1;--shiki-dark:#B392F0">content</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> String</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type PageType</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Page1</span><span style="color:#D73A49;--shiki-dark:#F97583"> |</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Page2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">init</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> ()</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#D73A49;--shiki-dark:#F97583">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">init</span><span style="color:#D73A49;--shiki-dark:#F97583"> _</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  ({ </span><span style="color:#6F42C1;--shiki-dark:#B392F0">info</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">toast</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">pageType</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Page1</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }, loadInfo)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type Msg</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> GotInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Result</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Http</span><span style="color:#D73A49;--shiki-dark:#F97583">.Error</span><span style="color:#D73A49;--shiki-dark:#F97583"> Info</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  |</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> ShowToast</span><span style="color:#D73A49;--shiki-dark:#F97583"> Toast</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  |</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> SetPageType</span><span style="color:#D73A49;--shiki-dark:#F97583"> PageType</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">update</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#D73A49;--shiki-dark:#F97583"> Model</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#D73A49;--shiki-dark:#F97583">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">update</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> msg model </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  case </span><span style="color:#24292E;--shiki-dark:#E1E4E8">msg </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    GotInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> result </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      case </span><span style="color:#24292E;--shiki-dark:#E1E4E8">result </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">        Ok</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> info </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          ({ model </span><span style="color:#D73A49;--shiki-dark:#F97583">|</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> info</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Ok</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> info) }, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">none)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">        Err</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> e </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          ({ model </span><span style="color:#D73A49;--shiki-dark:#F97583">|</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> info</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Err</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> e) }, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">none)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    ShowToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> t </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      ({ model </span><span style="color:#D73A49;--shiki-dark:#F97583">|</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> toast</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> t }, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">none)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    SetPageType</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> p </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      ({ model </span><span style="color:#D73A49;--shiki-dark:#F97583">|</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> pageType</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> p }, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">none)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">subscriptions</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Model</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#D73A49;--shiki-dark:#F97583"> Sub</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">subscriptions</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> model </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">  Sub</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">none</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">view</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Model</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#D73A49;--shiki-dark:#F97583"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">view</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> model </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  div []</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    [ h2 [] [ text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Demo App"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , viewInfo model</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">info</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , viewToast model</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">toast</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">viewInfo</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Maybe</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">Result</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Http</span><span style="color:#D73A49;--shiki-dark:#F97583">.Error</span><span style="color:#D73A49;--shiki-dark:#F97583"> Info</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">viewInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> mbInfoResult </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  case </span><span style="color:#24292E;--shiki-dark:#E1E4E8">mbInfoResult </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    Nothing</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Loading..."</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> infoResult </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      case </span><span style="color:#24292E;--shiki-dark:#E1E4E8">infoResult </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">        Err</span><span style="color:#D73A49;--shiki-dark:#F97583"> _</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          div []</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Could not load info"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">        Ok</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> info </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">          div []</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"App loaded"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">viewToast</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Maybe</span><span style="color:#D73A49;--shiki-dark:#F97583"> Toast</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#D73A49;--shiki-dark:#F97583"> Html</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">viewToast</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> mbToast </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  case </span><span style="color:#24292E;--shiki-dark:#E1E4E8">mbToast </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    Nothing</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      div [] []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> toast </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      div [] [ text toast</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">content</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">loadInfo</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Cmd</span><span style="color:#D73A49;--shiki-dark:#F97583"> Msg</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">loadInfo</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">  Http</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">get</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    { </span><span style="color:#6F42C1;--shiki-dark:#B392F0">url</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> "/info"</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">expect</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Http</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">expectJson </span><span style="color:#005CC5;--shiki-dark:#79B8FF">GotInfo</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> infoDecoder</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">infoDecoder</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Decoder</span><span style="color:#D73A49;--shiki-dark:#F97583"> Info</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">infoDecoder</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  map </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Info</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (field </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"isNewVersionAvailable"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> bool)</span></span>
<span class="line"></span></code></pre>
<p>The good bits are:</p>
<ul>
<li>forcing to handle all possible actions (messages) and results (HTTP success and error scenarios)</li>
<li>expressive language features (union types, strong typing, records, switch-case expressions) ensure robust code (as in this code does not leave room for mistakes like null/undefined/unhandled exceptions/unhandled code path/wrong value type)</li>
<li>no leeway for various ways to get things done (as in there is only one way to handle HTTP requests, only one way to handle asynchronous message dispatches, only one way to parse HTTP responses)</li>
</ul>
<p>But if Redux spreads things apart compared to modern React, Elm feels like it spreads things further apart by handling effect results separately (like sending HTTP request, parsing HTTP response and processing the result by dispatching another message).</p>
<p>One other example would be <a href="https://www.purescript.org/">PureScript</a> (or rather <a href="https://github.com/purescript-halogen/purescript-halogen">Halogen</a>). Purescript itself elevates the complexity to the skies and beyond, by making you run around with monads like a headless chicken. Consider “simple” example of sending a HTTP request:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">module</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Main</span><span style="color:#D73A49;--shiki-dark:#F97583"> where</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Prelude</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Affjax.Web</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> AX</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Affjax.ResponseFormat</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> AXRF</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Data.Either</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">hush</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Data.Maybe</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Maybe(..)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Effect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Effect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Effect.Aff.Class</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">class</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> H</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.Aff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">awaitBody</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">runHalogenAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HH</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML.Events</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HE</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML.Properties</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HP</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.VDom.Driver</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">runUI</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Web.Event.Event</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Event</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Web.Event.Event</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Event</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">main</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Effect</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Unit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runHalogenAff </span><span style="color:#D73A49;--shiki-dark:#F97583">do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  body </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> awaitBody</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  runUI component unit body</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  {</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> loading</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Boolean</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">username</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">result</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Maybe</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  =</span><span style="color:#22863A;--shiki-dark:#85E89D"> SetUsername</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  | </span><span style="color:#22863A;--shiki-dark:#85E89D">MakeRequest</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Event</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">component</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> query input output m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.Component</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> query input output m</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">component </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">mkComponent</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    { initialState</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , render</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , eval</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">mkEval </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">defaultEval { handleAction </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> handleAction }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">initialState</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> input. input </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">initialState _ </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { loading</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, username</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ""</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, result</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#22863A;--shiki-dark:#85E89D"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">render</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">State</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.ComponentHTML</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () m</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">render st </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">form</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HE</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">onSubmit </span><span style="color:#D73A49;--shiki-dark:#F97583">\</span><span style="color:#24292E;--shiki-dark:#E1E4E8">ev </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#22863A;--shiki-dark:#85E89D"> MakeRequest</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ev ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">h1_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Look up GitHub user"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">label_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">div_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Enter username:"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">input</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">value st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">username</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            , </span><span style="color:#22863A;--shiki-dark:#85E89D">HE</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">onValueInput </span><span style="color:#D73A49;--shiki-dark:#F97583">\</span><span style="color:#24292E;--shiki-dark:#E1E4E8">str </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#22863A;--shiki-dark:#85E89D"> SetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> str</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">button</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">disabled st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">loading</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        , </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">type_ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP.ButtonSubmit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Fetch info"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">p_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#D73A49;--shiki-dark:#F97583"> if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">loading </span><span style="color:#D73A49;--shiki-dark:#F97583">then</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> "Working..."</span><span style="color:#D73A49;--shiki-dark:#F97583"> else</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ""</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">div_</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        case</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">result </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">          Nothing</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">          Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> res </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">h2_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Response:"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">pre_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">code_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text res ] ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">handleAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> output m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.HalogenM</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () output m </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Unit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">handleAction </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> case</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  SetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">modify_ _ { username </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username, result </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#22863A;--shiki-dark:#85E89D"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  MakeRequest</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> event </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftEffect </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> Event</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">preventDefault event</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    username </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">gets _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">username</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">modify_ _ { loading </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    response </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftAff </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> AX</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">get </span><span style="color:#22863A;--shiki-dark:#85E89D">AXRF</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">string (</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"https://api.github.com/users/"</span><span style="color:#D73A49;--shiki-dark:#F97583"> &#x3C;></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">modify_ _ { loading </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, result </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> map _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">body (hush response) }</span></span>
<span class="line"></span></code></pre>
<p>Now add the <a href="https://github.com/thomashoneyman/purescript-halogen-store/"><code>halogen-store</code></a> package to the mix to make use of Redux-like state management:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">module</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Main</span><span style="color:#D73A49;--shiki-dark:#F97583"> where</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Prelude</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Affjax.Web</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> AX</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Affjax.ResponseFormat</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> AXRF</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Data.Either</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">hush</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Data.Maybe</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Maybe(..)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Effect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Effect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Effect.Aff.Class</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">class</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> H</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.Aff</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HA</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HH</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML.Events</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HE</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.HTML.Properties</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> HP</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.VDom.Driver</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">runUI</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Web.Event.Event</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Event</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Web.Event.Event</span><span style="color:#D73A49;--shiki-dark:#F97583"> as</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Event</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.Store.Monad</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">class</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadStore</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">updateStore</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">runStoreT</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.Store.Connect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Connected</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">connect</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Halogen.Store.Select</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">selectAll</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Effect.Aff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">launchAff_</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> StoreAction</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  =</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreSetUsername</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  | </span><span style="color:#22863A;--shiki-dark:#85E89D">StoreMakeRequest</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  | </span><span style="color:#22863A;--shiki-dark:#85E89D">StoreReceiveResponse</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Maybe</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> StoreAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">reduce store </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> case</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  StoreSetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    store { username </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username, result </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#22863A;--shiki-dark:#85E89D"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  StoreMakeRequest</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    store { loading </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  StoreReceiveResponse</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> response </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    store { loading </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, result </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> response }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">initialStore</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">initialStore </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { username</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ""</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, loading</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, result</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#22863A;--shiki-dark:#85E89D"> Nothing</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">main</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Effect</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Unit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> launchAff_ </span><span style="color:#D73A49;--shiki-dark:#F97583">do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  body </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> HA</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">awaitBody</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  root </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runStoreT initialStore reduce component</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  void </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runUI root unit body</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">type</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  {</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> loading</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Boolean</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">username</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , </span><span style="color:#6F42C1;--shiki-dark:#B392F0">result</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Maybe</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  =</span><span style="color:#22863A;--shiki-dark:#85E89D"> SetUsername</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  | </span><span style="color:#22863A;--shiki-dark:#85E89D">MakeRequest</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Event</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  | </span><span style="color:#22863A;--shiki-dark:#85E89D">ReceiveState</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#6F42C1;--shiki-dark:#B392F0">Connected</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Unit</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">deriveState</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Connected</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Unit</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">deriveState { context</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> { username, loading, result }, input</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _ } </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  { username</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , loading</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> loading</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  , result</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">component</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> query output m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadStore</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> StoreAction</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.Component</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> query </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Unit</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> output m</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">component </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  connect selectAll </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">mkComponent</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    { initialState</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> deriveState</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , render</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , eval</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">mkEval </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">defaultEval</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      { handleAction </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> handleAction</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      , receive </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#22863A;--shiki-dark:#85E89D"> Just</span><span style="color:#D73A49;--shiki-dark:#F97583"> &#x3C;&#x3C;&#x3C;</span><span style="color:#22863A;--shiki-dark:#85E89D"> ReceiveState</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">render</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">State</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.ComponentHTML</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () m</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">render st </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">form</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HE</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">onSubmit </span><span style="color:#D73A49;--shiki-dark:#F97583">\</span><span style="color:#24292E;--shiki-dark:#E1E4E8">ev </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#22863A;--shiki-dark:#85E89D"> MakeRequest</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ev ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">h1_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Look up GitHub user"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">label_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">div_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Enter username:"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">input</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">value st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">username</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            , </span><span style="color:#22863A;--shiki-dark:#85E89D">HE</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">onValueInput </span><span style="color:#D73A49;--shiki-dark:#F97583">\</span><span style="color:#24292E;--shiki-dark:#E1E4E8">str </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#22863A;--shiki-dark:#85E89D"> SetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> str</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">button</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">disabled st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">loading</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        , </span><span style="color:#22863A;--shiki-dark:#85E89D">HP</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">type_ </span><span style="color:#22863A;--shiki-dark:#85E89D">HP.ButtonSubmit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Fetch info"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">p_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#D73A49;--shiki-dark:#F97583"> if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">loading </span><span style="color:#D73A49;--shiki-dark:#F97583">then</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> "Working..."</span><span style="color:#D73A49;--shiki-dark:#F97583"> else</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ""</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">div_</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        case</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> st</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">result </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">          Nothing</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">          Just</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> res </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">h2_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Response:"</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            , </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">pre_</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">code_ [ </span><span style="color:#22863A;--shiki-dark:#85E89D">HH</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">text res ] ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">handleAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> output m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadStore</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> StoreAction</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.HalogenM</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () output m </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Unit</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">handleAction </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> case</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="color:#D73A49;--shiki-dark:#F97583">of</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  SetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    updateStore </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreSetUsername</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  MakeRequest</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> event </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftEffect </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> Event</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">preventDefault event</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    username </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">gets _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">username</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    updateStore </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreMakeRequest</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    response </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftAff </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> AX</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">get </span><span style="color:#22863A;--shiki-dark:#85E89D">AXRF</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">string (</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"https://api.github.com/users/"</span><span style="color:#D73A49;--shiki-dark:#F97583"> &#x3C;></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    updateStore </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreReceiveResponse</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (map _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">body (hush response))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  ReceiveState</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> input </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">    H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">put </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> deriveState input</span></span>
<span class="line"></span></code></pre>
<p>The really nice things about this approach are:</p>
<ul>
<li>components could be self-sufficient, as opposed to Elm:
<ul>
<li>they can have both internal state and communicate with the external application via <code>Aff</code></li>
<li>they can be extracted into separate modules, making them actually reusable components</li>
</ul>
</li>
<li>state selectors and connecting to a store are seamlessly implemented based on existing Halogen tools (subscriptions)</li>
<li>it feels like you do not have to worry about state growing big, since each component explicitly declares which parts of that messy furball it needs (derives)</li>
</ul>
<p>The bad news is that everything relies on monads and transformers - lifting, mapping, flat-mapping are just the very tip of the iceberg. Once you hit some mysterious error - it is quite tricky to understand what is going on. Unlike Elm, which has really nicely structured, formatted and presented both error message, its location and ways to fix it.</p>
<p>Just looking at the type definitions is nauseaing at best:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">handleAction</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> forall</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> output m. </span><span style="color:#6F42C1;--shiki-dark:#B392F0">MonadAff</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> MonadStore</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> StoreAction</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#D73A49;--shiki-dark:#F97583"> -></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> H.HalogenM</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> State</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Action</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () output m </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Unit</span></span>
<span class="line"></span></code></pre>
<p>And then there is this bit, lifting everything to the same monad and then mapping and flat-mapping it to get the response body:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">MakeRequest</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> event </span><span style="color:#D73A49;--shiki-dark:#F97583">-></span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">  H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftEffect </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> Event</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">preventDefault event</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  username </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">gets _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">username</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  updateStore </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreMakeRequest</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  response </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> H</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">liftAff </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> AX</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">get </span><span style="color:#22863A;--shiki-dark:#85E89D">AXRF</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">string (</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"https://api.github.com/users/"</span><span style="color:#D73A49;--shiki-dark:#F97583"> &#x3C;></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> username)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  updateStore </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#22863A;--shiki-dark:#85E89D"> StoreReceiveResponse</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (map _</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">body (hush response))</span></span>
<span class="line"></span></code></pre>
<p>And do not forget that this monad is merely describing the computation, you will have to run it at some point:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runHalogenAff </span><span style="color:#D73A49;--shiki-dark:#F97583">do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  body </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> HA</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">awaitBody</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  root </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runStoreT initialStore reduce component</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  let</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ui </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runUI root unit body</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  ui</span></span>
<span class="line"></span></code></pre>
<p>The example on <code>halogen-store</code> suggests using <code>launchAff_</code>, but then you will have to cast the return value type to match the monad of the <code>main</code> function (<code>Effect Unit</code>) or lift <code>runStoreT</code> to the <code>Effect Unit</code> monad - whichever you find suitable:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="purescript"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> launchAff_ </span><span style="color:#D73A49;--shiki-dark:#F97583">do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  body </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#22863A;--shiki-dark:#85E89D"> HA</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#24292E;--shiki-dark:#E1E4E8">awaitBody</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  root </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;-</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runStoreT initialStore reduce component</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  let</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ui </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> runUI root unit body</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  void ui</span></span>
<span class="line"></span></code></pre>
<p>But having to worry about all these intricacies actually strengthens the point that PureScript is not for the faint-harted - Elm prevails here.</p>
<p>The other drawback is that mixing logic in both component and the reducers is weird - it is not clear from the Flux architecture where the side-effects should live - like network calls, asynchronous actions, actions triggering other actions. Redux is known for suffering from all of these areas.</p>
<p>Elm solves this nicely with commands.</p>
<p>Halogen kind of takes a step backwards from Elm - it does have subscriptions, but it does not prevent you from issuing side effects from the <code>handleActions</code>. And <code>halogen-store</code> does not have a recipe for complex chained actions.</p>
<p>Ultimately, I don’t think Redux is bad - the idea to have a full visibility into all possible application interactions is scary in a complex project and it is hard to come up with a clean way to work around it, but single-way data flow is actually nice.</p>
<p>Interesting how developers went from <em>“we don’t want Angular.js dirty checks - it is not clear where the data is flowing”</em> to <em>“we don’t want a single point of contention for all application interactions”</em>.</p>
<p>In my eyes, the four technologies (modern-day React, Redux, Elm and Purescript) all come with their own pros and massive cons and there is no good or one-size-fits-all solution among them. And none of them ultimately solves the problem of managing application state and interactions in a non-bloated way. Maybe Angular or React 19 have an answer?</p>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2024 Your name here. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://m.webtoo.ls/@astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/mastodon" data-astro-cid-sz7xmlte><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://twitter.com/astrodotbuild" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" data-astro-cid-sz7xmlte><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/withastro/astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>