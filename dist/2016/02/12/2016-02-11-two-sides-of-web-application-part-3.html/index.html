<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.0.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://shybovycha.github.io/2016/02/12/2016-02-11-two-sides-of-web-application-part-3.html/"><!-- Primary Meta Tags --><title>Two sides of web application. Part 3: Communication Layer</title><meta name="title" content="Two sides of web application. Part 3: Communication Layer"><meta name="description"><link rel="stylesheet" href="/_astro/index.BvFNhZYw.css">
<style>footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body data-astro-cid-bvzihdzo> <nav class="top"> <div class="links"> <a class="nav-link nav-item" href="/">Home</a> <a class="nav-link nav-item" href="/about.html">About</a> </div> </nav> <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2016-02-11T13:47:39.000Z"> Feb 12, 2016 </time>  </div> <h1 data-astro-cid-bvzihdzo>Two sides of web application. Part 3: Communication Layer</h1> <hr data-astro-cid-bvzihdzo> </div>  <div class="row" style="justify-content: space-between">
    <div class="col-md-6 col-xs-12">
        <div class="card">
            <div class="card-header">
                Article series
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <a href="/2015/09/20/two-sides-of-web-application-part-1.html">
                        Part 1: The Tools
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="/2016/02/11/two-sides-of-web-application-part-2.html">
                        Part 2: Sketching
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="/2016/02/11/two-sides-of-web-application-part-3.html">
                        Part 3: Communication Layer
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-md-6 col-xs-12 text-xs-center text-md-right">
        <img src="/images/two-sides-of-web-application/a305-1-compressed.webp" class="img-responsive" style="max-height: 150px" alt="Funny image">
    </div>
</div>
<h2 id="foreword">Foreword</h2>
<p>In this section we will implement the communication layer for our application. It’ll handle
all the requests to/from our web server. Have no worries - we will create server application
in the next section!</p>
<h2 id="first-resource">First resource</h2>
<p>Let’s create a <code>Session</code> resource. Since we have no backend part, we should stub
the data. We’ll use Angular <strong>Services</strong>. That’s easy: a service defines a
function, returning, say, an object. That object will be used every time you
call a service. And you may use not only objects - you may return functions,
constants or literally anything from your services.</p>
<!--more-->
<p>We’ll return an object with two methods: <code>get(account)</code> and <code>create(account)</code>.
Both methods will take an object, containing user account details - <code>email</code>,
<code>password</code>, and, in case of <code>create()</code>, <code>name</code> and <code>password_confirmation</code>, additionally.
You might’ve guessed already: the <code>get(account)</code> method will log the user in and
<code>create(account)</code> will register a new account for the user.</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> testAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Artem'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'artem@ourstats.com'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: account.name,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>When you inject it into your controller, you may use it via</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({ email: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">''</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, password: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">''</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"></span></code></pre>
<p>The thing here is that we want to keep user data somewhere to simulate a
database work. So when user <em>“signs up”</em>, he will have his data saved in the memory
not to loose it when changing a page. We’ll use another service for that purpose.
But contrary to our <code>sessions</code> service, this one will be used in the future and even
barely changed.</p>
<p>Now, here’s one more trick: we defined our <code>Session</code> factory in the <code>ourStatsControllers</code> module.
Why did we do this? Why not just use <code>ourStatsApp</code> module? This is done mostly to keep things
in one place, so everything related to controllers and UI processing is kept inside one module.
Doing so we can later separate our modules into separate files and keep our main application
module clean from unnecessary code <em>(in terms of the whole application)</em>.</p>
<p>To store user account data we’ll use cookies. And there is a plugin for this
already! It is called <code>ngCookies</code>. And we’ll install it right now:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">bower</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> --save</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> angular-cookies</span></span>
<span class="line"></span></code></pre>
<p>This one’s configuration is a bit more complicated. But just a bit: it needs
to be added to application dependency list:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ourStatsApp </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">module</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ourStatsApp'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ngRoute'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ngCookies'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ourStatsControllers'</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]);</span></span>
<span class="line"></span></code></pre>
<p>But since we use cookies directly in controllers only, we may move the <code>ngCookies</code> dependency to
the <code>ourStatsControllers</code> module:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ourStatsControllers </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">module</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ourStatsControllers'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ngCookies'</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ourStatsApp </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">module</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ourStatsApp'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ngRoute'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ourStatsControllers'</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ]);</span></span>
<span class="line"></span></code></pre>
<p>Now we need to define our <code>AccountData</code> service. It’ll also require a <code>ngCookies</code> dependency:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'AccountData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$cookies'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$cookies</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> $cookies.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">getObject</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'account'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            set</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                $cookies.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">putObject</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'account'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, account);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                $cookies.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">remove</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'account'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>And we need to modify our <code>Session</code> service a bit:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$http'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'AccountData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$http</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">AccountData</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> testAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Artem'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'artem@ourstats.com'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">set</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(testAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: account.name,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">set</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(testAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>And now we can implement the controller to pick up the newly added service:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">controller</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$scope'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'AccountData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$scope</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Session</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.newAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.existingAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signIn</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.existingAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signUp</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.newAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signOut</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>But here’s just one small detail: we need both <code>Session</code> and <code>AccountData</code> services to perform
similar actions - managing session. We can refactor our code to keep all the session management
tasks in one place - <code>Session</code> service:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$http'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'AccountData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$http</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">AccountData</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> testAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Artem'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'artem@ourstats.com'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">set</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(testAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">account</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    name: account.name,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    email: account.email,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    password: account.password</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">set</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(testAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>Now our <code>NewSessionCtrl</code> could be refactored too:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">controller</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$scope'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$scope</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Session</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.newAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.existingAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signIn</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.existingAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signUp</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.newAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signOut</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>Looks better, huh?</p>
<p>So now we have our first member of our <strong>Model</strong> layer. It works with stubbed data right now,
but we’ll be changing that later. It is not bound to the <strong>ViewModel</strong>, because the values
of our <code>$scope.newAccount</code> and <code>$scope.existingAccount</code> are constant and don’t depend on
the template. To change this, we need to modify our <code>new_session.jade</code> template:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="pug"><code><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">.row</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    .col-xs-12.col-md-4.col-md-offset-1.well</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">        h3</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> Sign up</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">        form</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">ng-submit</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"signUp()"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"text"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Your name"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> ng-model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"newAccount.name"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"email"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Email"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> ng-model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"newAccount.email"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"password"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Password"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> ng-model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"newAccount.password"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"password"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Password confirmation"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group.text-center</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                button</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.btn.btn-primary</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"submit"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> Sign up</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    .col-md-2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    .col-xs-12.col-md-4.well</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">        h3</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> Sign in</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">        form</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">ng-submit</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"signIn()"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"email"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Email"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> ng-model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"existingAccount.name"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                input</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-control</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"password"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Password"</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> ng-model</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"existingAccount.password"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">            fieldset</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.form-group.text-center</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#85E89D">                button</span><span style="color:#6F42C1;--shiki-dark:#B392F0">.btn.btn-success</span><span style="color:#005CC5;--shiki-dark:#79B8FF">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">type</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"submit"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> Sign in</span></span>
<span class="line"></span></code></pre>
<p>Note the <code>ng-model</code> directive: it performs two-way data binding. It means, when user changes the
value of our, say, <code>name</code> input, the corresponding value inside controller, namely <code>$scope.newAccount.name</code>,
will also change. What’s more, when the value of <code>$scope.newAccount.name</code> will be changed from
the JavaScript (or, from the controller itself), the value within the input in a user’s browser,
will also be changed.</p>
<p>Now, what’s about the <code>ng-submit</code> directive. It is added to form tags only. And it works exactly as
you might’ve guessed: when form is submitted, the corresponding expression within that directive is called.</p>
<h2 id="making-fake-calls">Making fake calls</h2>
<p>Now that we have our stubbed signing in and up routines, we may redirect user to the right page
when he signed in or up successfully. This is the job for <code>$location</code> service. It’s available
in Angular core module, <code>ng</code>, so we don’t need to add any new module-wise dependencies.
Just use it in our <code>NewSessionCtrl</code>:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">controller</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$scope'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$location'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$scope</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">$location</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Session</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.newAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.existingAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signIn</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.existingAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signUp</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.newAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signOut</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"></span></code></pre>
<p>Here comes new refactoring-able piece of code: we now have our routes declared in both
<code>ourStatsApp</code> module and <code>ourStatsControllers</code>. So if we decide to change, let’s say,
route <code>/new-session</code> to <code>/login</code>, we will need to change it in both modules. We can easily
extract those URLs into a single service and use it in both <code>ourStatsControllers</code>
and <code>ourStatsApp</code> modules, because everything we define in <code>ourStatsControllers</code> will be
available in the <code>ourStatsApp</code> thanks to dependency injection. And since our URLs will
always be the same <em>(except, maybe, the parametrised ones)</em>, we may define a constant
instead of factory:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        landing: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        newSession: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/new-session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        editAccount: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/edit-account'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        listApplications: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        newApplication: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications/new'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">        showApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">            if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">!</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                id </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ':id'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">            return</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> `/applications/${</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id</span><span style="color:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">        editApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">            if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">!</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                id </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ':id'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">            return</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> `/applications/${</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id</span><span style="color:#032F62;--shiki-dark:#9ECBFF">}/edit`</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span></code></pre>
<h2 id="application-startup-phases">Application startup phases</h2>
<p>As you can see, there are a couple of entities you can create with Angular - we’ve already
dealt with <strong>controllers</strong>, <strong>factories</strong>, <strong>modules</strong> and <strong>constants</strong>. They all are slighty
different from each other and the difference lies under Angular startup process.</p>
<p>When your application <em>“starts up”</em> or initializes, there are two kingds of methods, which are
ran first: <code>config</code> and <code>run</code>. They are user-defined and your application can have more than just
one of those. Those methods define the initialization behaviour of your application. They both
can deal with dependency injection. But their run order is different: <code>config</code> blocks are executed
first, at the very beginning of the whole application initialization process. Thus you can inject
only <strong>providers</strong> <em>(<code>$routeProvider</code> for instance)</em> and <strong>constants</strong> into <code>config</code> blocks.
Whilst <code>run</code> blocks can only handle <strong>instances</strong> <em>(for example, <code>$scope</code>)</em> and <strong>constants</strong>.</p>
<p>Since we have our routes defined at the <code>config</code> stage, we need to use <strong>constant</strong> to name our
routes. And then use them like this:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">config</span><span style="color:#24292E;--shiki-dark:#E1E4E8">([</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$routeProvider'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$routeProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Url</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $routeProvider</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.landing, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'landing-page.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'LandingPageCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.newSession, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'new-session.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.editAccount, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'edit-account.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'EditAccountCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.listApplications, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'list-applications.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ListApplicationsCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.newApplication, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'new-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewApplicationCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">editApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(), {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'edit-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'EditApplicationCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">showApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(), {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'show-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ShowApplicationCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">otherwise</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    redirectTo: Url.landing</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                });</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsControllers</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">controller</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [ </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$scope'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$location'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$scope</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">$location</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Session</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Url</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $scope.newAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $scope.existingAccount </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signIn</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.existingAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.listApplications);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signUp</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($scope.newAccount);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.listApplications);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $scope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signOut</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">reset</span><span style="color:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.landing);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    ])</span></span>
<span class="line"></span></code></pre>
<p>To show the difference in practice, let’s add the authentication verification. We now have our
stubbed account and session management service, so why not? Angular provides us with two options:</p>
<ol>
<li>the <code>resolve</code> attribute for the <code>$routeProvider.when()</code> method</li>
<li>the <code>$routeChangeStart</code> event</li>
</ol>
<p>The first approach is nice, but since we set up routes in the <code>config</code> section, we are not allowed
to use services. And that is the problem, because we’ve got our <code>Session</code> service, handling the
tasks we need. And one more drawback of this method: one should set it for each route, which requires
verification:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> verifyAuthentication</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">config</span><span style="color:#24292E;--shiki-dark:#E1E4E8">([</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$routeProvider'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$routeProvider</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Url</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $routeProvider</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.landing, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'landing-page.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'LandingPageCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.newSession, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'new-session.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewSessionCtrl'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.editAccount, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'edit-account.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'EditAccountCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    resolve: verifyAuthentication</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.listApplications, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'list-applications.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ListApplicationsCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    resolve: verifyAuthentication</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.newApplication, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'new-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'NewApplicationCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    resolve: verifyAuthentication</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">editApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(), {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'edit-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'EditApplicationCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    resolve: verifyAuthentication</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">when</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">showApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(), {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    templateUrl: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'show-application.html'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    controller: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'ShowApplicationCtrl'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    resolve: verifyAuthentication</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">otherwise</span><span style="color:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    redirectTo: Url.landing</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                });</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }]);</span></span>
<span class="line"></span></code></pre>
<p>Handling <code>$routeChangeStart</code> event suits us, and what’s more interesting: it shows the use of <code>run</code>
section. But as a drawback to this, we’ll need the list of routes, which need to be checked. So
I modified the definition of <code>Url</code> constant like this:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, (() </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> urls </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            landing: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            newSession: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/new-session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            editAccount: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/edit-account'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            listApplications: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            newApplication: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'/applications/new'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            showApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">!</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    id </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ':id'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> `/applications/${</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id</span><span style="color:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            editApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#D73A49;--shiki-dark:#F97583">!</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    id </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> ':id'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> `/applications/${</span><span style="color:#24292E;--shiki-dark:#E1E4E8">id</span><span style="color:#032F62;--shiki-dark:#9ECBFF">}/edit`</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        urls.authRequired </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            urls.editAccount,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            urls.listApplications,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            urls.newApplication,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            urls.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">showApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            urls.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">editApplication</span><span style="color:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> urls;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    })());</span></span>
<span class="line"></span></code></pre>
<p>A bit tricky, does not it? And here’s the handler for the <code>$routeChangeStart</code> event:</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">run</span><span style="color:#24292E;--shiki-dark:#E1E4E8">([</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$rootScope'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$location'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Session'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'AccountData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Url'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$rootScope</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">$location</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Session</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">AccountData</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">Url</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            $rootScope.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">$on</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$routeChangeStart'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="color:#E36209;--shiki-dark:#FFAB70">event</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">current</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">next</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // check if user is authenticated for selected URLs only</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // first, try to restore his session</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // if this failed because user has no AccountData cookie - redirect him to newSession page</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (Url.authRequired.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">indexOf</span><span style="color:#24292E;--shiki-dark:#E1E4E8">($location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">()) </span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> -</span><span style="color:#005CC5;--shiki-dark:#79B8FF">1</span><span style="color:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="color:#D73A49;--shiki-dark:#F97583"> !</span><span style="color:#24292E;--shiki-dark:#E1E4E8">Session.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">() </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="color:#D73A49;--shiki-dark:#F97583"> !</span><span style="color:#24292E;--shiki-dark:#E1E4E8">AccountData.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    $location.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">path</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(Url.newSession);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            });</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        }]);</span></span>
<span class="line"></span></code></pre>
<h2 id="rocking-on">Rocking on</h2>
<p>Other services and controllers are much like those we already have, so I’ll just put in the code
in the end of the page. The interesting thing here is the <code>MockData</code> service that I’ve used to keep
data, used while we have no server side.</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">constant</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'MockData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        account: {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Artem'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            email: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'artem@ourstats.com'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            password: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'abc123'</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        applications: [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                id: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'App #1'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                token: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'APP1TOK'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                stats: {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    byCountry: [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Poland'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'USA'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">190</span><span style="color:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Algeria'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">5</span><span style="color:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                id: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'App #2'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                token: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'APP2TOK'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                stats: {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    byCountry: [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Vietnam'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">7</span><span style="color:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'New Zeland'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">19</span><span style="color:#24292E;--shiki-dark:#E1E4E8">},</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'USA'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">15</span><span style="color:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }, {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                id: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">2</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                name: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'App #3'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                token: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'APP3TOK'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                stats: {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    byCountry: [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                        {country: </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'USA'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, amount: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">95</span><span style="color:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                    ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">ourStatsApp</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'Application'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'$http'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'MockData'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="color:#E36209;--shiki-dark:#FFAB70">$http</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">MockData</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            create</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">application</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // send data to the server and check if response status == 200; return application (arg)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> application;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            get</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">fromDate</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">toDate</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // fromDate and toDate are used for stats filtering</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // send data to the server and return response</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> MockData.applications[id];</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            update</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="color:#E36209;--shiki-dark:#FFAB70">id</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">application</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // send data to the server and check if response status == 200; return application (arg)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> application;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">            all</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="color:#D73A49;--shiki-dark:#F97583">=></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">                // send request to the server and return the response</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">                return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> MockData.applications;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    }]);</span></span>
<span class="line"></span></code></pre>
<p>And here’s the demo of what we’ve done up until now:</p>
<p data-height="494" data-theme-id="0" data-slug-hash="vLMZmd" data-default-tab="result" data-user="shybovycha" class="codepen">See the Pen <a href="http://codepen.io/shybovycha/pen/vLMZmd/">Simple web analytics. Communication layer. v2</a> by Artem Shoobovych (<a href="http://codepen.io/shybovycha">@shybovycha</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async src="/assets.codepen.io/assets/embed/ei.js"></script>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2024 Your name here. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://m.webtoo.ls/@astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/mastodon" data-astro-cid-sz7xmlte><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://twitter.com/astrodotbuild" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" data-astro-cid-sz7xmlte><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/withastro/astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>